// This file is auto-generated by generate_patterns.js
// Patterns are loaded dynamically from src/patterns via webpack's require.context.

const patternsContext = require.context('./patterns', true, /\.json$/);

const patternLibrary = patternsContext.keys().reduce((library, key) => {
    const module = patternsContext(key);
    const pattern = module.default || module;

    const cleanPath = key.replace(/^\.\//, '');
    const segments = cleanPath.split('/');
    const fileName = segments.pop();
    const modeKey = segments[0] || 'classic';
    const patternName = pattern.name || fileName.replace(/\.json$/, '');

    if (!library[modeKey]) {
        library[modeKey] = {};
    }
    library[modeKey][patternName] = pattern;
    return library;
}, {});

const defaultMode = patternLibrary.classic ? 'classic' : Object.keys(patternLibrary)[0] || 'classic';

export const getPatternsForMode = (modeKey = defaultMode) => patternLibrary[modeKey] || patternLibrary[defaultMode] || {};

export default patternLibrary;
